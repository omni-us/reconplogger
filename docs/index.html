

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>plogger - omni:us python logger &mdash; plogger master/v2.1.0+2commits/2019.12.04 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> plogger
          

          
          </a>

          
            
            
              <div class="version">
                master/v2.1.0+2commits/2019.12.04
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">plogger</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>plogger - omni:us python logger</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="plogger-omni-us-python-logger">
<h1>plogger - omni:us python logger<a class="headerlink" href="#plogger-omni-us-python-logger" title="Permalink to this headline">¶</a></h1>
<p>This repository contains the code of plogger, a python package to ease the
standardization of logging within omni:us. The main design decision of plogger
is to allow total freedom to reconfigure loggers without hard coding anything.</p>
<p>The package contains essentially three things:</p>
<ul class="simple">
<li><p>A default logging configuration.</p></li>
<li><p>A function for loading logging configuration for regular python code.</p></li>
<li><p>A function for loading logging configuration for flask-based microservices.</p></li>
<li><p>Lower level functions for:</p>
<ul>
<li><p>Loading logging configuration from any of: config file, environment variable, or default.</p></li>
<li><p>Replacing the handlers of an existing Logger object.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-to-use">
<h1>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h1>
<p>There are two main use cases plogger targets. One is for logging in regular
generic python code and the second one is logging in microservices. See the two
standardizing sections below for a detailed explanation of the two use cases.</p>
<div class="section" id="add-as-requirement">
<h2>Add as requirement<a class="headerlink" href="#add-as-requirement" title="Permalink to this headline">¶</a></h2>
<p>The first step to use plogger is adding it as a requirement in the respective
package where it will be used. This means adding it in the file <cite>setup.cfg</cite> as
an item in <cite>install_requires</cite> or in an <cite>extras_require</cite> depending on whether
plogger is intended to be a core or an optional requirement.</p>
<p>Note: It is highly discouraged to develop packages in which requirements are
added directly to <cite>setup.py</cite> or to have an ambiguous <cite>requirements.txt</cite> file.
See the <cite>setup.cfg</cite> file in the plogger source code for reference.</p>
</div>
<div class="section" id="default-logging-configuration">
<h2>Default logging configuration<a class="headerlink" href="#default-logging-configuration" title="Permalink to this headline">¶</a></h2>
<p>An feature that plogger provides is the possibility of externally setting the
logging configuration without having to change code or implement any parsing of
configuration. However, if a logging configuration is not given externally,
plogger provide a default configuration.</p>
<p>The default configuration defines two handlers, both of which are stream
handlers and are set to DEBUG log level. The first handler called <cite>plain</cite> uses a
simple plain text formatter, and the second handler called <cite>json</cite> as the name
suggests outputs in json format using the <a class="reference external" href="https://pypi.org/project/logmatic-python/">logmatic</a> JsonFormatter class.</p>
<p>For each handler the default configuration defines a corresponding logger:
<code class="code docutils literal notranslate"><span class="pre">plogger_plain</span></code> and <code class="code docutils literal notranslate"><span class="pre">plogger_json</span></code>.</p>
</div>
<div class="section" id="standardizing-logging-in-regular-python">
<h2>Standardizing logging in regular python<a class="headerlink" href="#standardizing-logging-in-regular-python" title="Permalink to this headline">¶</a></h2>
<p>One objective of plogger is to ease the use of logging and standardize the way
it is done across all omni:us python code. The use of plogger comes down to
calling one function to get the logger object. For regular python code (i.e. not
a microservice) the function to use is <a class="reference internal" href="api.html#plogger.logger_setup" title="plogger.logger_setup"><code class="xref py py-func docutils literal notranslate"><span class="pre">plogger.logger_setup()</span></code></a>. To this
function you give as argument two strings, which are names of environment
variables, one for the logging configuration and the other for the name of the
logger to use. The following code snippet illustrates the use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plogger</span>

<span class="o">...</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">plogger</span><span class="o">.</span><span class="n">logger_setup</span><span class="p">(</span><span class="s1">&#39;PLOGGER_CFG&#39;</span><span class="p">,</span> <span class="s1">&#39;PLOGGER_NAME&#39;</span><span class="p">)</span>

<span class="o">...</span>

<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;My log message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the environment variables are not set, this function returns the
<code class="code docutils literal notranslate"><span class="pre">plogger_plain</span></code> logger from the default configuration.</p>
</div>
<div class="section" id="standardizing-logging-in-flask-based-microservices">
<h2>Standardizing logging in flask-based microservices<a class="headerlink" href="#standardizing-logging-in-flask-based-microservices" title="Permalink to this headline">¶</a></h2>
<p>The most important objective of plogger is to allow standardization of a
structured logging format for all microservices developed. Thus, the logging
from all microservices should be configured like explained here. The use is
analogous to the previous case, but using the
<a class="reference internal" href="api.html#plogger.flask_app_logger_setup" title="plogger.flask_app_logger_setup"><code class="xref py py-func docutils literal notranslate"><span class="pre">plogger.flask_app_logger_setup()</span></code></a> instead, and giving as a third argument
the flask app object. Additional to the previous case, this function replaces
the flask app and werkzeug loggers to use a plogger configured one. The usage
would be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plogger</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="o">...</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="o">...</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">plogger</span><span class="o">.</span><span class="n">flask_app_logger_setup</span><span class="p">(</span><span class="s1">&#39;PLOGGER_CFG&#39;</span><span class="p">,</span> <span class="s1">&#39;PLOGGER_NAME&#39;</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>

<span class="c1">## NOTE: do not change logger beyond this point!</span>

<span class="o">...</span>

<span class="c1">## Use logger in code</span>
<span class="n">myclass</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>

<span class="o">...</span>
</pre></div>
</div>
<p>An important note is that after configuring the logger, the code should not
modify the logger configuration. For example, the logging level should not be
modified, or only modified by providing a non-default option. Adding an
additional handler to the logger is not a problem. This could be desired for
example to also log to a file.</p>
<p>In the helm <cite>values.yaml</cite> file of the microservice, the default values for the
environment variables should be set as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">PLOGGER_CFG</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">plogger_default</span>
<span class="nt">PLOGGER_NAME</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">plogger_json</span>
</pre></div>
</div>
<p>With the <code class="code docutils literal notranslate"><span class="pre">plogger_json</span></code> logger, the format of the logs should look
something like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-09-05 17:38:38,137&quot;</span><span class="p">,</span> <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test_formatter.py&quot;</span><span class="p">,</span> <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-09-05 17:38:38,137&quot;</span><span class="p">,</span> <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test_formatter.py&quot;</span><span class="p">,</span> <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-09-05 17:38:38,137&quot;</span><span class="p">,</span> <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test_formatter.py&quot;</span><span class="p">,</span> <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-09-05 17:38:38,137&quot;</span><span class="p">,</span> <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="s2">&quot;CRITICAL&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test_formatter.py&quot;</span><span class="p">,</span> <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-09-05 17:38:38,137&quot;</span><span class="p">,</span> <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test_formatter.py&quot;</span><span class="p">,</span> <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;division by zero&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-09-05 17:38:38,138&quot;</span><span class="p">,</span> <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test_formatter.py&quot;</span><span class="p">,</span> <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Exception has occured&quot;</span><span class="p">,</span> <span class="s2">&quot;exc_info&quot;</span><span class="p">:</span> <span class="s2">&quot;Traceback (most recent call last):</span><span class="se">\n</span><span class="s2">  File </span><span class="se">\&quot;</span><span class="s2">plogger/tests/test_formatter.py</span><span class="se">\&quot;</span><span class="s2">, line 31, in test_exception_with_trace</span><span class="se">\n</span><span class="s2">    b = 100 / 0</span><span class="se">\n</span><span class="s2">ZeroDivisionError: division by zero&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-09-05 17:38:38,138&quot;</span><span class="p">,</span> <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;test_formatter.py&quot;</span><span class="p">,</span> <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">,</span> <span class="s2">&quot;context check&quot;</span><span class="p">:</span> <span class="s2">&quot;check&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="use-of-the-logger-object">
<h2>Use of the logger object<a class="headerlink" href="#use-of-the-logger-object" title="Permalink to this headline">¶</a></h2>
<p>The logger objects returned by the setup functions are normal python
<code class="code docutils literal notranslate"><span class="pre">logging.Logger</span></code> objects, so all the standard logging functionalities
should be used. Please refer to the <a class="reference external" href="https://docs.python.org/3/howto/logging.html">logging package documentation</a> for details.</p>
<p>A couple of logging features that should be very commonly used are the
following. To add additional structured information to a log, the <code class="code docutils literal notranslate"><span class="pre">extra</span></code>
argument should be used. A simple example could be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Successfully processed document&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;uuid&#39;</span><span class="p">:</span> <span class="n">uuid</span><span class="p">})</span>
</pre></div>
</div>
<p>When an exception occurs the <code class="code docutils literal notranslate"><span class="pre">exc_info=True</span></code> argument should be used, for
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;Failed to run task&#39;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-a-file-handler">
<h2>Adding a file handler<a class="headerlink" href="#adding-a-file-handler" title="Permalink to this headline">¶</a></h2>
<p>In some circumstances it is desired to add to a logger a file handler so that
the logging messages are also saved to a file. This normally requires at least
three lines of code, thus to simplify things plogger provides the
<a class="reference internal" href="api.html#plogger.add_file_handler" title="plogger.add_file_handler"><code class="xref py py-func docutils literal notranslate"><span class="pre">plogger.add_file_handler()</span></code></a> function to do the same with a single line of
code. The use is quite straightforward as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plogger</span><span class="o">.</span><span class="n">add_file_handler</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="s1">&#39;/path/to/log/file.log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="overriding-logging-configuration">
<h2>Overriding logging configuration<a class="headerlink" href="#overriding-logging-configuration" title="Permalink to this headline">¶</a></h2>
<p>An important feature of plogger is that the logging configuration of apps that
use it can be easily changed via the environment variables given to the logger
setup functions. Using the same environment variables as the previous examples,
the following could be done. First set the environment variables with the
desired logging configuration and logger name:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PLOGGER_NAME</span><span class="o">=</span><span class="s2">&quot;example_logger&quot;</span>

<span class="nb">export</span> <span class="nv">PLOGGER_CFG</span><span class="o">=</span><span class="s2">&quot;{</span>
<span class="s2">    &#39;version&#39;: 1,</span>
<span class="s2">    &#39;formatters&#39;: {</span>
<span class="s2">        &#39;verbose&#39;: {</span>
<span class="s2">            &#39;format&#39;: &#39;%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s&#39;</span>
<span class="s2">        },</span>
<span class="s2">    },</span>
<span class="s2">    &#39;handlers&#39;: {</span>
<span class="s2">        &#39;console&#39;:{</span>
<span class="s2">            &#39;level&#39;:&#39;DEBUG&#39;,</span>
<span class="s2">            &#39;class&#39;:&#39;logging.StreamHandler&#39;,</span>
<span class="s2">            &#39;formatter&#39;: &#39;verbose&#39;</span>
<span class="s2">        },</span>
<span class="s2">    },</span>
<span class="s2">    &#39;loggers&#39;: {</span>
<span class="s2">        &#39;example_logger&#39;: {</span>
<span class="s2">            &#39;handlers&#39;: [&#39;console&#39;],</span>
<span class="s2">            &#39;level&#39;: &#39;ERROR&#39;,</span>
<span class="s2">        },</span>
<span class="s2">    }</span>
<span class="s2">}&quot;</span>
</pre></div>
</div>
<p>Then, in the python code the logger would be used as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">plogger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">plogger</span><span class="o">.</span><span class="n">logger_setup</span><span class="p">(</span><span class="s1">&#39;PLOGGER_CFG&#39;</span><span class="p">,</span> <span class="s1">&#39;PLOGGER_NAME&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;My error message&#39;</span><span class="p">)</span>
<span class="go">ERROR 2019-10-18 14:45:22,629 &lt;stdin&gt; 16876 139918773925696 My error message</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="low-level-functions">
<h1>Low level functions<a class="headerlink" href="#low-level-functions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="loading-configuration">
<h2>Loading configuration<a class="headerlink" href="#loading-configuration" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="api.html#plogger.load_config" title="plogger.load_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">plogger.load_config()</span></code></a> function allows loading of a python logging
configuration. The loading of configuration can be from a file (giving its
path), from an environment variable (giving the variable name), or loading the
default configuration that comes with plogger. The loading from file and from
environment variable expects the format to be yaml or json. See below examples
of loading for each of the cases:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plogger</span>

<span class="c1">## Load from config file</span>
<span class="n">plogger</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;/path/to/config.yaml&#39;</span><span class="p">)</span>

<span class="c1">## Load from environment variable</span>
<span class="n">plogger</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;PLOGGER_CFG&#39;</span><span class="p">)</span>

<span class="c1">## Load default config</span>
<span class="n">plogger</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;plogger_default&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="replacing-logger-handlers">
<h2>Replacing logger handlers<a class="headerlink" href="#replacing-logger-handlers" title="Permalink to this headline">¶</a></h2>
<p>In some cases it might be needed to replace the handlers of some already
existing logger. For this plogger provides the
<a class="reference internal" href="api.html#plogger.replace_logger_handlers" title="plogger.replace_logger_handlers"><code class="xref py py-func docutils literal notranslate"><span class="pre">plogger.replace_logger_handlers()</span></code></a> function. To use it, simply provide the
logger in which to replace the handlers and the logger from where to get the
handlers. Using the same environment variables as above, the procedure would be
as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plogger</span>

<span class="n">plogger</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;PLOGGER_CFG&#39;</span><span class="p">)</span>
<span class="n">plogger</span><span class="o">.</span><span class="n">replace_logger_handlers</span><span class="p">(</span><span class="s1">&#39;some_logger_name&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;PLOGGER_NAME&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h1>
<p>Contributions to this package are very welcome. When you intend to work with the
source code, note that this project does not include a <code class="code docutils literal notranslate"><span class="pre">requirements.txt</span></code>
file. This is by intention. To make it very clear what are the requirements for
different use cases, all the requirements of the project are stored in the file
<code class="code docutils literal notranslate"><span class="pre">setup.cfg</span></code>. The basic runtime requirements are defined in section
<code class="code docutils literal notranslate"><span class="pre">[options]</span></code> in the <code class="code docutils literal notranslate"><span class="pre">install_requires</span></code> entry. All optional
requirements are stored in section <code class="code docutils literal notranslate"><span class="pre">[options.extras_require]</span></code>. There is a
<code class="code docutils literal notranslate"><span class="pre">dev</span></code> extras require to be used by developers (e.g. requirements to run
the unit tests) and a <code class="code docutils literal notranslate"><span class="pre">bump</span></code> extras require for the maintainer of the
package.</p>
<p>The recommended way to work with the source code is the following. First clone
the repository, then create a virtual environment, activate it and finally
install the development requirements. More precisely the steps would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone ssh://git@code.omnius.corp:7999/bkd/plogger.git
<span class="nb">cd</span> plogger
virtualenv -p python3 venv
. venv/bin/activate
</pre></div>
</div>
<p>The crucial step is installing the requirements which would be done by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install --editable .<span class="o">[</span>dev,test<span class="o">]</span>
</pre></div>
</div>
<p>After changing the code, always run unit tests as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./setup.py <span class="nb">test</span>
</pre></div>
</div>
<div class="section" id="pull-requests">
<h2>Pull requests<a class="headerlink" href="#pull-requests" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The master branch in bitbucket is blocked for pushing. Thus to contribute it
is required to create and push to a new branch and issue a pull request.</p></li>
<li><p>On every push to any branch, the jenkins server will build the wheel package
and run unit tests. The contributor should check the corresponding status to
make sure everything runs successfully. The status of the jenkins jobs can
also be seen in the bitbucket repo.</p></li>
<li><p>A pull request will only be accepted if:</p>
<blockquote>
<div><ul class="simple">
<li><p>All python files pass pylint checks.</p></li>
<li><p>All unit tests run successfully.</p></li>
<li><p>New code has docstrings and gets included in the html documentation.</p></li>
<li><p>Jenkins job is successful.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>When developing, after cloning be sure to run the githook-pre-commit to setup
the pre-commit hook. This will help you by automatically running pylint before
every commit.</p></li>
</ul>
</div>
<div class="section" id="using-bump-version">
<h2>Using bump version<a class="headerlink" href="#using-bump-version" title="Permalink to this headline">¶</a></h2>
<p>Only the maintainer of this repo should bump versions and this should be done only
on the master branch. To bump the version it is required to use the bumpversion that
should already be installed if <code class="code docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">--editable</span> <span class="pre">.[dev,test]</span></code> was run
as previously instructed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bumpversion major/minor/path
</pre></div>
</div>
<p>Push the tags to the repository as well</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git push<span class="p">;</span> git push --tags
</pre></div>
</div>
<p>When the version tags are pushed, jenkins will automatically build the wheel file,
test it and if successful, push the package to the pypi server.</p>
</div>
</div>
<div class="section" id="documentation-contents">
<h1>Documentation Contents<a class="headerlink" href="#documentation-contents" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-plogger">plogger module</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-present, omni:us

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>